{% extends "base.html" %}

{% block content %}

<div class="row justify-content-center my-5">
    <div class="col-lg-7 col-md-10">

        <h2 class="text-center my-4">Результаты детектирования</h2>

        {% for r in results %}
        <div class="card shadow-sm mb-4 p-4">

            <h5 class="mb-3">{{ r.filename }}</h5>

            <img src="{{ r.image_url }}"
                 class="img-fluid rounded border mb-3"
                 style="max-height: 800px; object-fit: contain;">

            {% if r.detections|length == 0 %}
                <div class="alert alert-info">Дефекты не обнаружены</div>
            {% else %}
                <div class="list-group">
                    {% for d in r.detections %}
                    <div class="list-group-item">
                        <span class="badge bg-primary">{{ d.class_name }}</span>
                        <span class="badge bg-success">{{ (d.confidence * 100)|round(1) }}%</span>
                        <small class="text-muted ms-2">
                            bbox={{ d.bbox }}, area={{ d.bbox_area }}
                        </small>
                    </div>
                    {% endfor %}
                </div>
            {% endif %}

        </div>
        {% endfor %}

        <a href="/" class="btn btn-outline-success w-100 mt-4">
            Вернуться к форме
        </a>

    </div>
</div>

{% endblock %}
